session: tiago
init_cmd: |
  echo " "
  echo " "
  echo " "
  echo "Running Initialisation" | awk '{ gsub("Running Initialisation", "\033[1;21m\033[1;30m&\033[0m"); print }' ;

  #exec /bin/bash
  cd @TMULE_CONFIG_DIR@ || true
  set -o pipefail
  function export_default () {
    var_name="$1"
    var_default="$2"
    eval $var_name="${!var_name:-$var_default}"
    export $var_name
    echo "  $0 -> $var_name=${!var_name}"
  }

  # source ROS
  source "/opt/ros/$(rosversion -d)/setup.bash"

  # source the tiago catkin workspace
  source "$HOME/.bashrc"
  export_default CATKIN_WS "$HOME/ros_ws"

  # PNP specific arguments
  export_default PNP_PLANS "$CATKIN_WS/src/HRISim/hrisim_plans"
  export_default PNP_ACTIONS "$CATKIN_WS/src/HRISim/hrisim_actions"
  export_default PNP_CONDITIONS "$CATKIN_WS/src/HRISim/hrisim_conditions"

windows:
  - name: roscore
    tags: ['core']
    panes:
      - htop
      - ping $ROS_MASTER
  - name: planning
    tags: ['core']
    panes:
      - 'roslaunch pnp_ros pnp_ros.launch plans_folder:=$PNP_PLANS actions_folder:=$PNP_ACTIONS conditions_folder:=$PNP_CONDITIONS'
      - 'cd ~/ros_ws/src/HRISim/hrisim_plans; echo -e "\033[1;31mStart your plan here: python PassByTheCentre.py nRepetition Bagname, e.g.\n python PassByTheCentre.py 8 robotPriority\033[0m"'
  - name: rviz
    tags: ['viz']
    panes:
      - 'rviz -d "$(rospack find hrisim_rviz)/config/rviz/tiago_rviz.rviz" --fixed-frame map'